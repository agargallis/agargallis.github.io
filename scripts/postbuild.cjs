const { mkdirSync, copyFileSync, existsSync } = require("fs");
const { resolve } = require("path");

const dist = resolve(process.cwd(), "dist");
const copies = [
  { from: "resume.html", to: "resume/index.html" },
  { from: "contact.html", to: "contact/index.html" },
];

for (const { from, to } of copies) {
  const source = resolve(dist, from);
  const target = resolve(dist, to);
  const targetDir = resolve(dist, to.split("/").slice(0, -1).join("/"));

  if (!existsSync(source)) {
    console.warn(`[postbuild] Missing ${from} in dist; skipping.`);
    continue;
  }

  mkdirSync(targetDir, { recursive: true });
  copyFileSync(source, target);
}
